<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PathSpace: Handoff Notice</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">PathSpace
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__2_users_2chrgre01_2src_2_path_space_2docs_2_plan___path_space___inspector.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Handoff Notice </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md155"></a></p>
<blockquote class="doxtable">
<p><b>Drafted:</b> October 20, 2025 — initial plan for the PathSpace inspector (live web-based introspection). </p>
</blockquote>
<h1 class="doxsection"><a class="anchor" id="autotoc_md156"></a>
PathSpace Inspector Plan</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md157"></a>
Goals</h2>
<ul>
<li>Provide a browser-based inspector that visualizes PathSpace subtrees in real time.</li>
<li>Support developers debugging native or remote PathSpace applications without instrumenting code.</li>
<li>Start as read-only (Phase 0/1); later consider limited write/edit actions with explicit safeguards.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md158"></a>
Dependencies</h2>
<ul>
<li><b>JSON Serialization Support:</b> PathSpace must export subtrees as JSON (see task “JSON Serialization Support”).</li>
<li><b>Distributed PathSpace Mounts:</b> Web server should access remote application roots securely (<a class="el" href="_plan___distributed___path_space_8md.html">Plan_Distributed_PathSpace.md</a>).</li>
<li><b>Web Server Infrastructure:</b> Inspector API rides on the web server adapter; implementation begins after baseline web endpoints (auth, SSE, <span class="tt">/api/path</span>) are in place.</li>
<li><b>Auth/ACLs:</b> Reuse web server sessions; ensure inspector respects app-root boundaries. Allow an explicit “root” role for trusted users to view the entire <span class="tt">/</span> tree.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md159"></a>
Architecture Overview</h2>
<div class="fragment"><div class="line">PathSpace App ──(distributed mount)──&gt; Web Server Inspector API ──SSE/REST──&gt; Browser Inspector UI</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md160"></a>
Backend (Inspector API)</h3>
<ul>
<li>Lives alongside the web server adapter (and ships after its initial implementation). Expose:<ul>
<li><span class="tt">GET /inspector/tree?root=&lt;path&gt;&amp;depth=N</span> — initial JSON snapshot.</li>
<li><span class="tt">GET /inspector/node/&lt;encoded-path&gt;</span> — full detail for a node.</li>
<li><span class="tt">GET /inspector/stream?root=&lt;path&gt;</span> — SSE channel streaming incremental updates (add/update/remove).</li>
<li>Optional <span class="tt">GET /inspector/search?q=...</span> for finding nodes by path/type/value.</li>
</ul>
</li>
<li>Uses JSON serializer to encode nodes (<span class="tt">{ path, type, value_summary, metadata, diagnostics, children }</span>).</li>
<li>Subscribes to PathSpace wait/notify to push live updates through SSE.</li>
<li>Rate-limit SSE per user and per root to prevent flooding; queue updates to maintain order.</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md161"></a>
Frontend (Browser)</h3>
<ul>
<li>Single-page JS app (keep dependencies light): renders tree, detail pane, search box.</li>
<li>Components:<ul>
<li><b>Tree View:</b> virtualized list for large hierarchies; shows basic info (path segment, type, last update).</li>
<li><b>Detail Panel:</b> displays full value (JSON), metadata (timestamps, waiters, diagnostics).</li>
<li><b>Search/Filter:</b> quick filter by path or type; highlight matches in tree.</li>
<li><b>Live Indicators:</b> highlight nodes updated in the last X seconds.</li>
</ul>
</li>
<li>SSE client applies incremental changes (add child, update node, remove node) with fallbacks to full refresh if a diff fails.</li>
<li>Provide manual refresh button, auto-refresh toggle, and “pin”/“watch” list for frequently monitored paths.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md162"></a>
Phases</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md163"></a>
Phase 0 — Local Read-Only Prototype</h3>
<ul>
<li>Inspector API serves initial snapshot and manual refresh only (no SSE yet).</li>
<li>UI renders tree + detail, supports manual refresh and path selection.</li>
<li>Auth via existing session; assume local PathSpace.</li>
<li>Document setup in README (e.g., <span class="tt">./scripts/run_inspector.sh</span>).</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md164"></a>
Phase 1 — Live Updates &amp; Search</h3>
<ul>
<li>Add SSE streaming for incremental updates (insert/update/remove).</li>
<li>UI highlights updates, provides “recent changes” view, and basic search/filter.</li>
<li>Implement rate limiting/backpressure on SSE.</li>
<li>Add tests (Playwright/headless) to verify incremental updates and search.</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md165"></a>
Phase 2 — Remote Mounts &amp; Multi-App</h3>
<ul>
<li>Integrate distributed mounts so inspector can target remote app roots.</li>
<li>UI allows selecting which app/root to inspect (dropdown or query parameter).</li>
<li>Enforce ACLs per exported subtree; handle unauthorized access gracefully.</li>
<li>Expand diagnostics view (e.g., error counts, waiters).</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md166"></a>
Phase 3 — Developer Tools</h3>
<ul>
<li>Watchlist/bookmarks for critical paths.</li>
<li>Snapshot capture/export to JSON file for bug reports.</li>
<li>Diff mode: compare two snapshots or revisions.</li>
<li>Optional limited write actions (e.g., toggling flags) gated behind explicit opt-in and logging (scoped as future optional feature; keep default read-only).</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md167"></a>
Phase 4 — Polish &amp; Performance</h3>
<ul>
<li>Optimize tree rendering (virtualization, lazy loading).</li>
<li>Improve accessibility (keyboard navigation, ARIA labels).</li>
<li>Refine logging/metrics for inspector usage (update via Observability section).</li>
<li>Document workflows in <span class="tt"><a class="el" href="_a_i___debugging___playbook_8md.html">docs/AI_Debugging_Playbook.md</a></span>.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md168"></a>
Security Considerations</h2>
<ul>
<li>Inspector routes require authenticated sessions; optionally restrict by role (e.g., <span class="tt">inspector</span> role).</li>
<li>Support an explicit “root”/admin role that can inspect the full <span class="tt">/</span> tree; default users remain scoped to their app roots.</li>
<li>When a session ends (logout, timeout, or connection drop), terminate inspector streams and allow remote applications to shut down before a new session is established.</li>
<li>All responses read-only by default; future write actions must require extra confirmation or session flag.</li>
<li>Log inspector actions to <span class="tt">app_root/io/log/web</span> with user, path, action.</li>
<li>Limit per-user watchlists and search frequency to prevent scanning entire PathSpace without authorization.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md169"></a>
Observability &amp; Testing</h2>
<ul>
<li>Metrics: inspector requests latency, SSE events delivered, queue depth, dropped updates.</li>
<li>Automated tests: backend unit tests (JSON serialization sanity), integration tests (CLI + headless browser).</li>
<li>Add inspector section to <span class="tt"><a class="el" href="_a_i___debugging___playbook_8md.html">docs/AI_Debugging_Playbook.md</a></span> with usage examples.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md170"></a>
Integration Points</h2>
<ul>
<li>Update <span class="tt"><a class="el" href="_plan___web_server___adapter_8md.html">docs/finished/Plan_WebServer_Adapter_Finished.md</a></span> once inspector endpoints exist.</li>
<li>Reference inspector availability in <span class="tt"><a class="el" href="_plan___distributed___path_space_8md.html">docs/Plan_Distributed_PathSpace.md</a></span> (client tools).</li>
<li>Add README snippet showing how to launch the inspector and connect to a running app.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md171"></a>
Next Actions</h2>
<ol type="1">
<li>Finalize JSON schema and SSE diff format (coordinate with serialization task).</li>
<li>Implement Phase 0 backend endpoints and minimal UI.</li>
<li>Add backlog entries per phase (P1 for Phase 0 &amp; 1).</li>
<li>Update Plan Overview with inspector plan entry when implementation begins. </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
